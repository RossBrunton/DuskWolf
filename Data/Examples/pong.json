[
	{"a":"listen", "event":"sys-event-load", "actions":[
		{"a":"comment", "text":"Paddle"},
		{"a":"var", "name":"paddle-width", "value":"16"},
		{"a":"var", "name":"paddle-height", "value":"64"},
		{"a":"var", "name":"paddle-lx", "value":"16"},
		
		{"a":"var", "name":"paddle-rx", "value":"${$sys-sg-width;,$-paddle-lx;,$-paddle-width;}"},
		
		{"a":"var", "name":"paddle-ybound", "value":"${$-paddle-height;,$sys-sg-height;}"},
		
		{"a":"comment", "text":"Paddle Borders"},
		{"a":"var", "name":"left-border", "value":"${$paddle-width;,$paddle-lx;}"},
		{"a":"var", "name":"right-border", "value":"$paddle-rx;"},
		
		{"a":"comment", "text":"Player Paddle Direction"},
		{"a":"var", "name":"dir", "value":"U"},
		
		{"a":"comment", "text":"Ball"},
		{"a":"var", "name":"ball-d", "value":"16"},
		{"a":"var", "name":"ball-dx", "value":"4"},
		{"a":"var", "name":"ball-dy", "value":"4"},
		{"a":"var", "name":"ball-ybound", "value":"${$-ball-d;,$sys-sg-height;}"},
		
		{"a":"comment", "text":"Scores"},
		{"a":"var", "name":"points-cpu", "value":"0"},
		{"a":"var", "name":"points-pla", "value":"0"},
		
		{"a":"function", "name":"floatyscore", "actions":[
			{"a":"pane", "name":"pong", "children":[
				{"name":"Floaty", "type":"Label", "text":"$points-pla; - $points-cpu;", "x":"$ball-x;", "y":"$ball-y;", "float":{"dir":"u"}, "fade":{"from":1, "to":0, "speed":-0.05}}
			]}
		]}
	]},
	
	
	{"a":"listen", "event":"sys-event-start", "actions":[
		{"a":"pane", "name":"pong", "focus":"left", "active":"1", "children":[
			{"type":"DirListener", "name":"left", "child":
				{"name":"p", "type":"Image", "src":"Examples/unfocused.png", "x":"$paddle-lx;", "height":"$paddle-height;", "width":"$paddle-width;"},
			"action-up":[{"a":"var", "name":"dir", "value":"U"}], "action-down":[{"a":"var", "name":"dir", "value":"D"}]},
			
			{"type":"Single", "name":"right", "fade":{"from":0, "to":1, "speed":0.01}, "child":
				{"name":"p", "type":"Image", "src":"Examples/active.png", "x":"$paddle-rx;", "height":"$paddle-height;", "width":"$paddle-width;"}
			},
			
			{"type":"Image", "name":"ball", "x":"${{$sys-sg-height;,0.5}}", "y":"${{$sys-sg-width;,0.5}}", "src":"Examples/focused.png", "width":"$ball-d;", "height":"$ball-d;"}
		]}
	]},
	
	
	{"a":"listen", "event":"sys-event-frame", "actions":[
		{"a":"sg-path", "pane":"pong", "path":"/left/p", "y":{"to":"paddle-ly"}},
		{"a":"sg-path", "pane":"pong", "path":"/right/p", "y":{"to":"paddle-ry"}},
		{"a":"sg-path", "pane":"pong", "path":"/ball", "y":{"to":"ball-y"}, "x":{"to":"ball-x"}},
		
		{"a":"if", "cond":"$ball-y; = 0 | $ball-y; = $ball-ybound", "then":[{"a":"var", "name":"ball-dy", "value":"$-ball-dy;"}]},
		
		{"a":"comment", "text":"Paddle Movement"},
		{"a":"if", "cond":"$dir; = U & $paddle-ly; > 0", "then":[
			{"a":"sg-path", "pane":"pong", "path":"/left/p", "y":"${-4,$paddle-ly;}"}
		]},
		
		{"a":"if", "cond":"$dir; = D & $paddle-ly; < $paddle-ybound;", "then":[
			{"a":"sg-path", "pane":"pong", "path":"/left/p", "y":"${4,$paddle-ly;}"}
		]},
		
		{"a":"if", "cond":"($ball-y; < $paddle-ry;) & ($paddle-ry; > 0)", "then":[
			{"a":"sg-path", "pane":"pong", "path":"/right/p", "y":"${-5,$paddle-ry;}"}
		]},
		
		{"a":"if", "cond":"($ball-y; > $paddle-ry;) & ($paddle-ry; < $paddle-ybound;)", "then":[
			{"a":"sg-path", "pane":"pong", "path":"/right/p", "y":"${5,$paddle-ry;}"}			
		]},
		
		{"a":"comment", "text":"Score"},
		{"a":"if", "cond":"$ball-x; <= $left-border;", "then":[
			{"a":"var", "name":"ball-dx", "value":"$-ball-dx;"},
			{"a":"if", "cond":"!($ball-y; > $paddle-ly; & $ball-y; < ${$paddle-ly;,$paddle-height;})", "then":[
				{"a":"var", "name":"points-cpu", "value":"${$points-cpu;,1}"},
				{"a":"print", "text":"BLAST!"},
				{"a":"call", "name":"floatyscore"}
			]}
		]},
		
		{"a":"if", "cond":"${$ball-d;,$ball-x;} >= $right-border;", "then":[
			{"a":"var", "name":"ball-dx", "value":"$-ball-dx;"},
			{"a":"if", "cond":"!($ball-y; > $paddle-ry; & $ball-y; < ${$paddle-ry;,$paddle-height;})", "then":[
				{"a":"var", "name":"points-pla", "value":"${$points-pla;,1}"},
				{"a":"print", "text":"SCORE!"},
				{"a":"call", "name":"floatyscore"}
			]}
		]},
		
		{"a":"comment", "text":"Ball Movement"},
		{"a":"sg-path", "pane":"pong", "path":"ball", "y":"${$ball-dy;,$ball-y;}", "x":"${$ball-x;,$ball-dx;}"}
	]}
]
